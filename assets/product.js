window.ThemeSection_Product=({product:t,variant:e,featuredMediaID:i,template:r,thumbnailsPosition:s,showThumbnailsOnMobile:a})=>({productRoot:null,product:t,current_variant:e,featured_media_id:i,current_media_id:i,loading:!1,quantity:"1",options:[],optionHandles:[],storeAvailability:null,addedToCart:!1,stickyAddToCartShown:!1,template:r,thumbnailsPosition:s,showThumbnailsOnMobile:a,hasGiftCardRecipientForm:!1,cartAddErrorMessage:null,get addToCartText(){return this.current_variant?this.loading?window.theme.strings.loading:!this.loading&&this.current_variant.available?"product.preorder"===this.template?window.theme.strings.preOrder:window.theme.strings.addToCart:this.loading||this.current_variant.available?void 0:window.theme.strings.soldOut:window.theme.strings.unavailable},get currentVariantId(){return this.current_variant?this.current_variant.id:null},get currentVariantAvailabilityClosestLocation(){if(!Alpine.store("availability"))return null;const t=this.currentVariantId,e=Alpine.store("availability").availability[t];return e?e.closest_location:null},get currentVariantAvailable(){return this.current_variant?this.current_variant.available:null},get currentVariantTitle(){return this.current_variant&&this.current_variant.title&&!this.current_variant.title.includes("Default")?this.current_variant.title:""},get current_price(){return this.current_variant.price},get isUsingSlideshowToDisplayMedia(){const t=this.productRoot.querySelector(".splide--product");return!(!(window.Splide&&this.productRoot&&t&&window.slideshows&&window.slideshows[`${t.id}`])||window.slideshows[`${t.id}`].state.is(window.Splide.STATES.DESTROYED))},formatMoney:t=>formatMoney(t,theme.moneyFormat),init(){this.productRoot=this.$root,this.$root.querySelector('[x-data="Theme_GiftCardRecipient"]')&&(this.hasGiftCardRecipientForm=!0),this.$refs.productForm&&this.$refs.productForm.addEventListener("submit",this.submitForm.bind(this)),this.getOptions(),this.getAddToCartButtonHeight(),this.$watch("current_media_id",((t,e)=>{a&&this.$root.dispatchEvent(new CustomEvent("shapes:product:mediachange",{bubbles:!0,detail:{media_id:this.current_media_id,slideshow_id:this.productRoot.querySelector(".splide--product")?.id}})),this.isUsingSlideshowToDisplayMedia||(this.$root.querySelector(`[data-product-single-media-wrapper="${e}"]`).dispatchEvent(new CustomEvent("mediaHidden")),this.$root.querySelector(`[data-product-single-media-wrapper="${t}"]`).dispatchEvent(new CustomEvent("mediaVisible")))})),this.updateStoreAvailability(this.current_variant)},getAddToCartButtonHeight(){window.onload=function(){const t=document.querySelector(".add-to-cart-btn").offsetHeight;document.documentElement.style.setProperty("--payment-button-height",`${t}px`)}},updateStoreAvailability(t){this.$refs.storeAvailabilityContainer&&(this.storeAvailability=this.storeAvailability||new StoreAvailability(this.$refs.storeAvailabilityContainer),this.storeAvailability&&t&&this.storeAvailability.fetchContent(t))},optionChange(){this.getOptions();const t=ShopifyProduct.getVariantFromOptionArray(this.product,this.options);if(this.current_variant=t,this.current_variant){variantLiveRegion(this.current_variant),this.updateStoreAvailability(this.current_variant),this.current_variant.featured_media&&(this.current_media_id=this.current_variant.featured_media.id);const t=ShopifyProductForm.getUrlWithVariant(window.location.href,this.current_variant.id);window.history.replaceState({path:t},"",t),this.$refs.singleVariantSelector.dispatchEvent(new Event("change",{bubbles:!0})),this.$root.dispatchEvent(new CustomEvent("shapes:product:variantchange",{bubbles:!0,detail:{variant:this.current_variant}}))}},getOptions(){this.options=[],this.optionHandles=[],this.$root.querySelectorAll("[data-single-option-selector]").forEach((t=>{if("SELECT"===t.nodeName){const e=t.value;this.options.push(e),this.optionHandles.push(t.options[t.selectedIndex].dataset.handle)}else if(t.checked){console;const e=t.value;this.options.push(e),this.optionHandles.push(t.dataset.handle)}}))},changeMedia(t){if(this.$root.dispatchEvent(new CustomEvent("shapes:product:arrow-change",{bubbles:!0,detail:{direction:t}})),"under"==this.thumbnailsPosition){const e=this.$root.querySelector(".product-thumbnail-list-item--active"),i="prev"==t?e.previousElementSibling:e.nextElementSibling;null!==i&&i.querySelector(".media-thumbnail").click()}},submitForm(t){t.preventDefault(),this.loading=!0,this.addedToCart=!1,liveRegion(window.theme.strings.loading);const e=new FormData(this.$refs.productForm),i=this.$refs.productForm.getAttribute("id");let r="modal"===theme.settings.cart_type;const s=fetchConfigDefaults("javascript");r&&(e.append("sections","cart-items,cart-footer,cart-item-count"),e.append("sections_url",window.location.pathname)),s.body=e,s.headers["X-Requested-With"]="XMLHttpRequest",delete s.headers["Content-Type"],fetch(`${theme.routes.cart_add_url}`,s).then((t=>t.json())).then((t=>{if(t.status){this.loading=!1;const r=t.errors||t.description,s=t.description||t.message;return this.hasGiftCardRecipientForm||(this.cartAddErrorMessage=s||window.theme.strings.cartError),void document.body.dispatchEvent(new CustomEvent("shapes:cart:adderror",{detail:{source:"product-form",sourceId:i,variantId:e.get("id"),errors:r,message:s}}))}this.loading=!1,this.cartAddErrorMessage=null,this.addedToCart=!0,r&&document.body.dispatchEvent(new CustomEvent("shapes:modalcart:afteradditem",{bubbles:!0,detail:{response:t}})),document.querySelector('[data-show-on-add="true"]')||this.$refs.added&&this.$nextTick((()=>this.$refs.added.focus()))})).catch((t=>{}))},openZoom(t){const e=this.productRoot.querySelector("[data-photoswipe-images]");if(!e)return;const i=JSON.parse(e.innerHTML),r=Object.keys(i).indexOf(t);this.$refs.photoSwipeComponent.dispatchEvent(new CustomEvent("shapes:photoswipe:open",{detail:{index:r}}))}}),window.productThumbnails=()=>({firstVisible:!0,lastVisible:!1,mounted(){const t=this.$refs.firstThumbnail,e=this.$refs.lastThumbnail,i={root:this.$root.querySelector(".splide__track"),rootMargin:"0px",threshold:1},r=new window.IntersectionObserver((([t])=>{t.isIntersecting?this.firstVisible=!0:this.firstVisible=!1}),i),s=new window.IntersectionObserver((([t])=>{t.isIntersecting?this.lastVisible=!0:this.lastVisible=!1}),i);r.observe(t),s.observe(e)}});